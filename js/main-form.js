"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=this.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function s(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function o(e){return!/^[\d\+][\d\(\)\ -]{6,14}\d$/.test(e.value)}e.addEventListener("submit",(async function(r){r.preventDefault();let l=function(e){let r=0,l=document.querySelectorAll("._req");for(let e=0;e<l.length;e++){const a=l[e];n(a),a.classList.contains("_email")?s(a)&&(t(a),r++,console.log("error")):("checkbox"===a.getAttribute("type")&&!1===a.checked||""===a.value)&&(t(a),r++),a.classList.contains("_tel")&&(o(a)?(t(a),r++,console.log("error")):("checkbox"===a.getAttribute("type")&&!1===a.checked||""===a.value)&&(t(a),r++))}return r}(),a=new FormData(e);if(console.log(a),0===l){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:a});if(t.ok){let n=await t.json();alert(n.message),formPreviev.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("blad"),e.classList.remove("_sending");console.log("all OK")}else alert("wypelnij pola")}))}));